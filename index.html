<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>SMART HTML Viewer</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --bg-color: #f5f5f5;
      --text-color: #0f172a;
      --icon-color: #2563eb;
      --glow-color: #00aaff;
      --button-bg: #ffffff;
      --shadow-color: rgba(0, 170, 255, 0.35);
      --accent: #2563eb;
    }
    body.dark {
      --bg-color: #181a1f;       /* خاکستری خیلی تیره */
      --text-color: #aefcae;     /* سبز روشن */
      --icon-color: #7cfc00;     /* سبز Xbox */
      --glow-color: #00ff88;     /* سبز نئونی */
      --button-bg: #202428;      /* کمی روشن‌تر از بک‌گراند */
      --shadow-color: rgba(0, 255, 136, 0.35);
      --accent: #00ff88;
    }
    body {
      background: var(--bg-color);
      color: var(--text-color);
      font-family: 'Segoe UI', Tahoma, sans-serif;
      margin: 0;
      padding: 24px;
      transition: background 0.25s ease, color 0.25s ease;
    }
    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 18px;
      color: var(--text-color);
    }

    .toolbar {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 16px;
    }
    .group { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    .device-button, .action-btn {
      width: 44px; height: 44px; border-radius: 10px; border: none;
      background: var(--button-bg);
      display: inline-flex; justify-content: center; align-items: center;
      font-size: 18px; cursor: pointer;
      box-shadow: 0 0 12px var(--shadow-color);
      transition: transform 0.35s ease, box-shadow 0.35s ease, background 0.2s ease;
      transform-style: preserve-3d;
    }
    .device-button i, .action-btn i { color: var(--icon-color); transition: color 0.2s ease; }
    .device-button:hover, .action-btn:hover {
      transform: translateY(-6px) rotate3d(1, 1, 0, 18deg) scale(1.1);
      box-shadow: 0 0 25px var(--glow-color);
    }

    .dropdown { position: relative; }
    .dropdown-content {
      position: absolute; top: calc(100% + 8px); right: 0;
      background: var(--button-bg); border-radius: 8px; box-shadow: 0 0 12px var(--shadow-color);
      padding: 8px; z-index: 10; display: none; min-width: 160px;
    }
    .dropdown.open .dropdown-content { display: block; }
    .dropdown-content button {
      width: 100%; margin: 4px 0; padding: 8px 10px; font-size: 14px;
      border: none; background: var(--button-bg); color: var(--text-color);
      cursor: pointer; border-radius: 6px; transition: background 0.2s, color 0.2s;
      text-align: right;
    }
    .dropdown-content button:hover { background: var(--accent); color: #fff; }

    select, input[type="number"] {
      padding: 8px 10px; border-radius: 10px; border: 1px solid var(--accent);
      background: var(--button-bg); color: var(--text-color); font-size: 14px;
      box-shadow: 0 0 8px var(--shadow-color);
    }

    .editor {
      width: 100%; min-height: 220px;
      padding: 12px; border-radius: 10px; border: 1px solid var(--accent);
      background: var(--button-bg); color: var(--text-color);
      font-family: monospace; font-size: 14px; resize: vertical;
      box-shadow: 0 0 12px var(--shadow-color);
    }

    .preview-wrap {
      margin-top: 16px;
      background: var(--button-bg);
      border: 1px solid var(--accent);
      border-radius: 12px;
      box-shadow: 0 0 12px var(--shadow-color);
      overflow: hidden;
      position: relative;
    }
    .preview-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 12px; border-bottom: 1px solid var(--accent);
      font-size: 13px; color: var(--text-color);
      background: rgba(0,0,0,0.04);
    }
    .preview-header .left { display:flex; gap:8px; align-items:center; }
    .chip {
      padding: 4px 8px; border-radius: 999px;
      background: rgba(0,0,0,0.06);
      border: 1px solid var(--accent);
      font-size: 12px;
    }
    iframe {
      display: block;
      width: 100%;
      height: 220px; /* پیش‌فرض 220 */
      background: #fff;
      border: none;
    }
    .resizer {
      position: absolute; bottom: 0; left: 0; right: 0;
      height: 10px; cursor: ns-resize;
      background: linear-gradient(90deg, transparent, var(--glow-color), transparent);
      opacity: 0.6;
    }

    footer { text-align: center; margin-top: 18px; font-size: 13px; opacity: 0.7; }
  </style>
</head>
<body>
  <h1 id="title">SMART HTML Viewer</h1>

  <div class="toolbar">
    <div class="group">
      <button class="device-button" data-device="laptop" title="لپ‌تاپ"><i class="fas fa-laptop"></i></button>
      <button class="device-button" data-device="tablet" title="تبلت"><i class="fas fa-tablet-alt"></i></button>
      <button class="device-button" data-device="mobile" title="موبایل"><i class="fas fa-mobile-alt"></i></button>
      <label class="chip">
        ارتفاع:
        <input id="heightInput" type="number" min="200" max="1200" step="20" style="width:80px; margin-inline-start:6px;">
        px
      </label>
    </div>
    <div class="group">
      <button class="action-btn" id="runBtn" title="اجرای کد"><i class="fas fa-play"></i></button>
      <button class="action-btn" id="copyBtn" title="کپی"><i class="fas fa-copy"></i></button>

      <div class="dropdown" id="downloadDropdown">
        <button class="action-btn" title="دانلود"><i class="fas fa-download"></i></button>
        <div class="dropdown-content">
          <button data-type="html">دانلود HTML</button>
          <button data-type="txt">دانلود TXT</button>
        </div>
      </div>

      <select id="languageSelect" title="زبان">
        <option value="fa">فارسی</option>
        <option value="en">English</option>
        <option value="ar">العربية</option>
        <option value="fr">Français</option>
        <option value="es">Español</option>
        <option value="zh">中文</option>
        <option value="de">Deutsch</option>
      </select>

      <button class="action-btn" id="themeToggle" title="تغییر حالت"><i class="fas fa-moon"></i></button>
    </div>
  </div>

  <textarea id="htmlInput" class="editor" placeholder="کد HTML خود را اینجا بنویسید..."></textarea>

  <div class="preview-wrap">
    <div class="preview-header">
      <div class="left">
        <span class="chip">پیش‌نمایش</span>
        <span id="
